<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pyscript Demo 7</title>
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <link rel="stylesheet" href="./style7.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/tuftsceeo/SPIKE-Web-Interface/cdn/ServiceDock.js" charset="utf-8"></script>
    <py-env>
        - numpy
        - matplotlib
        - asyncio
    </py-env>
</head>

<body>
    <py-title>ServiceDock REPL</py-title>
    <p style="margin-left:25px;">Run ServiceDock code directly using the PyScript REPL environment! *Don't forget to connect to ServiceDock before running any ServiceDock specific code!</p>

    <br>

    <div class="wrapper-grid">
    </div>

    <div id="servicedock" style="display:inline-block; margin-left:25px; margin-right: 25px;">
        <div id="spike"> 
		    <service-spike id="service_spike"></service-spike>
        </div>
	</div>

    <py-repl auto-generate="true"> </py-repl>

    <br><br>

    <py-script>
        from pyodide import create_proxy
        import asyncio

        serviceSPIKE = document.getElementById("service_spike").getService()

    </py-script>

    <script>
        let serviceSPIKE = document.getElementById("service_spike").getService();

        const wait = ms => new Promise(res => setTimeout(res, ms))

        serviceSPIKE.executeAfterInit(async function() {
            console.log("Working!");

        })
    </script>
    

</body>